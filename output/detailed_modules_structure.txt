DETAILED MODULE STRUCTURE:

[1] anpr_detector.py
Description: ANPR Детектор - РЕАЛЬНАЯ боевая версия для распознавания номерных знаков
Size: (30.4 KB, 726 lines)

Module Functions: None

Classes:
  ANPRDetector (inherits from: None)
    Methods:
      __init__(2 args)
        Calls: 1, Called by: 0
      _analyze_car_brand(2 args)
        Calls: 1, Called by: 1
      _analyze_for_violations(4 args)
        Calls: 0, Called by: 1
      _check_gpu_available(1 args)
        Calls: 0, Called by: 2
      _classify_car_type(2 args)
        Calls: 0, Called by: 2
      _detect_car_color(2 args)
        Calls: 0, Called by: 2
      _detect_traffic_light_violations(2 args)
        Calls: 0, Called by: 1
      _detect_vehicles(2 args)
        Calls: 1, Called by: 2
      _extract_text_regions(2 args)
        Calls: 0, Called by: 3
      _get_plate_format(2 args)
        Calls: 0, Called by: 1
      _get_plate_type(2 args)
        Calls: 0, Called by: 1
      _get_region_from_plate(2 args)
        Calls: 0, Called by: 1
      _get_vehicle_class_name(2 args)
        Calls: 0, Called by: 1
      _load_models(1 args)
        Calls: 1, Called by: 1
      _preprocess_image(2 args)
        Calls: 0, Called by: 2
      _validate_license_plate(2 args)
        Calls: 3, Called by: 1
      analyze_image(2 args)
        Calls: 5, Called by: 0
      detect_car_brands(2 args)
        Calls: 6, Called by: 1
      detect_license_plates(2 args)
        Calls: 4, Called by: 1
      detect_streets(2 args)
        Calls: 2, Called by: 1
      detect_violations(2 args)
        Calls: 2, Called by: 1

Imports:
  PIL.Image
  cv2
  datetime.datetime
  logging
  numpy
  os
  paddle
  paddleocr
  pathlib.Path
  re
  time
  typing.Any
  typing.Dict
  typing.List
  typing.Optional
  ultralytics.YOLO

--------------------------------------------------------------------------------

[2] anpr_processor.py
Description: ANPR (Automatic Number Plate Recognition) module for license plate detection and recognition.
Size: (24.7 KB, 644 lines)

Module Functions:
  convert_cyrillic_to_latin(1 args)
    Calls: 0 functions
    Called by: 1 functions

  detect_license_plates_batch(6 args)
    Calls: 3 functions
    Called by: 1 functions

  enhance_plate_image(1 args)
    Calls: 0 functions
    Called by: 1 functions

  export_anpr_results(2 args)
    Calls: 2 functions
    Called by: 1 functions

  extract_plate_regions(1 args)
    Calls: 0 functions
    Called by: 1 functions

  get_kazakhstan_regions(0 args)
    Calls: 0 functions
    Called by: 2 functions

  get_license_plate_patterns(0 args)
    Calls: 5 functions
    Called by: 1 functions

  get_russia_regions(0 args)
    Calls: 0 functions
    Called by: 3 functions

  group_plates_by_timestamp(2 args)
    Calls: 0 functions
    Called by: 1 functions

  initialize_anpr_models(0 args)
    Calls: 1 functions
    Called by: 1 functions

  main(0 args)
    Calls: 2 functions
    Called by: 0 functions

  process_frame_anpr(4 args)
    Calls: 3 functions
    Called by: 1 functions

  process_single_video_anpr(2 args)
    Calls: 5 functions
    Called by: 1 functions

  recognize_plate_text(2 args)
    Calls: 1 functions
    Called by: 1 functions

  validate_license_plate(2 args)
    Calls: 1 functions
    Called by: 1 functions

Classes: None

Imports:
  config_manager.get_output_dir
  config_manager.get_processing_params
  config_manager.get_video_path
  config_manager.set_video_path
  cv2
  frame_extractor.extract_frames_with_timestamps
  numpy
  paddleocr.PaddleOCR
  pathlib.Path
  re
  result_exporter.create_output_filename
  result_exporter.export_objects_csv
  time
  typing.Any
  typing.Dict
  typing.List
  typing.Optional
  typing.Tuple
  ultralytics.YOLO

--------------------------------------------------------------------------------

[3] anpr_walker.py
Description: ANPR Walker - Recursive image processor with unified ANPR system
Size: (41.9 KB, 1000 lines)

Module Functions:
  main(0 args)
    Calls: 1 functions
    Called by: 0 functions

Classes:
  ANPRWalker (inherits from: None)
    Methods:
      __init__(2 args)
        Calls: 1, Called by: 0
      _finalize_stats(1 args)
        Calls: 0, Called by: 2
      _group_violation_sequences(2 args)
        Calls: 2, Called by: 1
      _parse_timestamp_from_filename(2 args)
        Calls: 0, Called by: 2
      _safe_imread(2 args)
        Calls: 0, Called by: 2
      _select_best_frame_from_group(2 args)
        Calls: 1, Called by: 1
      _setup_logging(1 args)
        Calls: 0, Called by: 1
      find_images(2 args)
        Calls: 0, Called by: 1
      get_metadata_path(2 args)
        Calls: 0, Called by: 4
      process_image(2 args)
        Calls: 1, Called by: 1
      run(2 args)
        Calls: 10, Called by: 1
      save_metadata(3 args)
        Calls: 1, Called by: 1
      should_process(2 args)
        Calls: 1, Called by: 1

Imports:
  PIL.Image
  argparse
  cv2
  datetime.datetime
  dotenv.load_dotenv
  json
  logging
  numpy
  os
  pathlib.Path
  pdf_generator.ViolationReportGenerator
  time
  typing.Any
  typing.Dict
  typing.List
  typing.Optional
  unified_anpr_system.UnifiedANPRSystem

--------------------------------------------------------------------------------

[4] audio_extractor.py
Description: Audio Extractor - Вспомогательный модуль для извлечения аудио сегментов
Size: (2.7 KB, 89 lines)

Module Functions:
  check_ffmpeg_available(0 args)
    Calls: 0 functions
    Called by: 2 functions

  cleanup_temp_files(1 args)
    Calls: 0 functions
    Called by: 2 functions

  extract_audio_segment(4 args)
    Calls: 0 functions
    Called by: 2 functions

Classes: None

Imports:
  glob
  os
  pathlib.Path
  subprocess
  typing.Optional

--------------------------------------------------------------------------------

[5] audio_transcriber.py
Description: transcribe audio track from video using whisper
Size: (4.8 KB, 140 lines)

Module Functions:
  extract_audio_from_video(2 args)
    Calls: 0 functions
    Called by: 1 functions

  format_timestamp(1 args)
    Calls: 0 functions
    Called by: 4 functions

  initialize_whisper_model(0 args)
    Calls: 0 functions
    Called by: 1 functions

  process_transcription_segments(2 args)
    Calls: 4 functions
    Called by: 1 functions

  transcribe_audio(3 args)
    Calls: 0 functions
    Called by: 1 functions

  transcribe_video_file(0 args)
    Calls: 7 functions
    Called by: 1 functions

Classes: None

Imports:
  config_manager.get_audio_dir
  config_manager.get_processing_params
  config_manager.get_video_path
  json
  pathlib.Path
  subprocess
  torch
  typing.Any
  typing.Dict
  typing.List
  whisper

--------------------------------------------------------------------------------

[6] chunked_video_analyzer.py
Description: Chunked Video Analyzer - Прототип v2
Size: (17.2 KB, 437 lines)

Module Functions:
  main(0 args)
    Calls: 4 functions
    Called by: 0 functions

Classes:
  ChunkedVideoAnalyzer (inherits from: None)
    Methods:
      __init__(2 args)
        Calls: 1, Called by: 0
      analyze_segment(3 args)
        Calls: 0, Called by: 1
      calculate_frame_resolution(3 args)
        Calls: 0, Called by: 1
      create_vllm_prompt(3 args)
        Calls: 0, Called by: 1
      export_results(3 args)
        Calls: 0, Called by: 1
      extract_segment_frames(6 args)
        Calls: 0, Called by: 1
      get_video_info(2 args)
        Calls: 0, Called by: 1
      initialize_models(1 args)
        Calls: 1, Called by: 1
      load_config(2 args)
        Calls: 0, Called by: 1
      process_video(2 args)
        Calls: 7, Called by: 1
      transcribe_segment(4 args)
        Calls: 1, Called by: 1

Imports:
  audio_extractor.check_ffmpeg_available
  audio_extractor.cleanup_temp_files
  audio_extractor.extract_audio_segment
  base64
  config_manager.set_video_path
  cv2
  json
  numpy
  pathlib.Path
  result_exporter.create_output_filename
  time
  torch
  tqdm.tqdm
  traceback
  typing.Any
  typing.Dict
  typing.List
  typing.Optional
  typing.Tuple
  vllm_client.VLLMClient
  whisper

--------------------------------------------------------------------------------

[7] config_manager.py
Description: Module: unknown
Size: (6.2 KB, 161 lines)

Module Functions:
  get_audio_dir(0 args)
    Calls: 0 functions
    Called by: 1 functions

  get_output_dir(0 args)
    Calls: 0 functions
    Called by: 2 functions

  get_processing_params(0 args)
    Calls: 0 functions
    Called by: 13 functions

  get_video_info(0 args)
    Calls: 1 functions
    Called by: 0 functions

  get_video_path(0 args)
    Calls: 0 functions
    Called by: 9 functions

  load_config(0 args)
    Calls: 0 functions
    Called by: 5 functions

  set_video_path(1 args)
    Calls: 0 functions
    Called by: 10 functions

Classes: None

Imports:
  dotenv.load_dotenv
  frame_extractor.get_video_info
  os
  pathlib.Path
  typing.Any
  typing.Dict

--------------------------------------------------------------------------------

[8] db_manager.py
Description: PostgreSQL Database Manager for Video Tagging
Size: (17.3 KB, 513 lines)

Module Functions: None

Classes:
  EmbeddingModel (inherits from: None)
    Methods:
      __new__(1 args)
        Calls: 0, Called by: 0
      encode(2 args)
        Calls: 0, Called by: 0

  PostgresDBManager (inherits from: None)
    Methods:
      __del__(1 args)
        Calls: 1, Called by: 0
      __init__(6 args)
        Calls: 1, Called by: 0
      _ensure_connection(1 args)
        Calls: 1, Called by: 8
      _get_connection(1 args)
        Calls: 0, Called by: 2
      add_segments(3 args)
        Calls: 1, Called by: 0
      close(1 args)
        Calls: 0, Called by: 1
      create_or_update_video_file(9 args)
        Calls: 1, Called by: 0
      delete_video_segments(2 args)
        Calls: 1, Called by: 0
      get_collection_stats(1 args)
        Calls: 1, Called by: 0
      get_video_status(2 args)
        Calls: 1, Called by: 0
      list_videos(2 args)
        Calls: 1, Called by: 0
      search(5 args)
        Calls: 1, Called by: 0
      update_video_status(2 args)
        Calls: 1, Called by: 0

Imports:
  datetime.datetime
  json
  logging
  pathlib.Path
  pgvector.psycopg2.register_vector
  psycopg2
  psycopg2.extras.RealDictCursor
  sentence_transformers.SentenceTransformer
  typing.Any
  typing.Dict
  typing.List
  typing.Optional

--------------------------------------------------------------------------------

[9] db_manager_chromadb_backup.py
Description: ChromaDB Manager for Video Tagging
Size: (16.8 KB, 480 lines)

Module Functions: None

Classes:
  ChromaDBManager (inherits from: None)
    Methods:
      __init__(2 args)
        Calls: 0, Called by: 0
      add_segments(3 args)
        Calls: 0, Called by: 0
      create_or_update_video_file(9 args)
        Calls: 0, Called by: 0
      delete_video_segments(2 args)
        Calls: 0, Called by: 0
      get_collection_stats(1 args)
        Calls: 0, Called by: 0
      get_video_status(2 args)
        Calls: 0, Called by: 1
      list_videos(2 args)
        Calls: 0, Called by: 0
      reset_collections(1 args)
        Calls: 0, Called by: 0
      search(5 args)
        Calls: 0, Called by: 0
      update_video_status(2 args)
        Calls: 1, Called by: 0

Imports:
  chromadb
  chromadb.config.Settings
  datetime.datetime
  datetime.datetime
  json
  logging
  pathlib.Path
  typing.Any
  typing.Dict
  typing.List
  typing.Optional

--------------------------------------------------------------------------------

[10] db_manager_postgres.py
Description: PostgreSQL Database Manager for Video Tagging
Size: (17.3 KB, 513 lines)

Module Functions: None

Classes:
  EmbeddingModel (inherits from: None)
    Methods:
      __new__(1 args)
        Calls: 0, Called by: 0
      encode(2 args)
        Calls: 0, Called by: 0

  PostgresDBManager (inherits from: None)
    Methods:
      __del__(1 args)
        Calls: 1, Called by: 0
      __init__(6 args)
        Calls: 1, Called by: 0
      _ensure_connection(1 args)
        Calls: 1, Called by: 8
      _get_connection(1 args)
        Calls: 0, Called by: 2
      add_segments(3 args)
        Calls: 1, Called by: 0
      close(1 args)
        Calls: 0, Called by: 1
      create_or_update_video_file(9 args)
        Calls: 1, Called by: 0
      delete_video_segments(2 args)
        Calls: 1, Called by: 0
      get_collection_stats(1 args)
        Calls: 1, Called by: 0
      get_video_status(2 args)
        Calls: 1, Called by: 0
      list_videos(2 args)
        Calls: 1, Called by: 0
      search(5 args)
        Calls: 1, Called by: 0
      update_video_status(2 args)
        Calls: 1, Called by: 0

Imports:
  datetime.datetime
  json
  logging
  pathlib.Path
  pgvector.psycopg2.register_vector
  psycopg2
  psycopg2.extras.RealDictCursor
  sentence_transformers.SentenceTransformer
  typing.Any
  typing.Dict
  typing.List
  typing.Optional

--------------------------------------------------------------------------------

[11] debug_vllm.py
Description: Debug VLLM - отладка конкретных проблемных сегментов
Size: (2.7 KB, 82 lines)

Module Functions:
  debug_segment(1 args)
    Calls: 0 functions
    Called by: 0 functions

Classes: None

Imports:
  json
  phase2_vllm_analysis.Phase2VLLMAnalyzer

--------------------------------------------------------------------------------

[12] face_processor.py
Description: Face detection and clustering module using direct TensorFlow models for high performance.
Size: (22.4 KB, 607 lines)

Module Functions:
  cluster_faces_to_persons(3 args)
    Calls: 1 functions
    Called by: 1 functions

  detect_faces(2 args)
    Calls: 1 functions
    Called by: 0 functions

  detect_faces_batch(2 args)
    Calls: 6 functions
    Called by: 1 functions

  detect_faces_single_frame(2 args)
    Calls: 0 functions
    Called by: 2 functions

  group_faces_by_timestamp(2 args)
    Calls: 0 functions
    Called by: 1 functions

  initialize_face_models(0 args)
    Calls: 0 functions
    Called by: 1 functions

  is_same_person(3 args)
    Calls: 0 functions
    Called by: 1 functions

  preprocess_face_for_tf(1 args)
    Calls: 0 functions
    Called by: 1 functions

  process_faces_batch_tf(1 args)
    Calls: 2 functions
    Called by: 1 functions

  process_faces_with_deepface(1 args)
    Calls: 0 functions
    Called by: 1 functions

  process_faces_with_tf_models(1 args)
    Calls: 1 functions
    Called by: 1 functions

Classes: None

Imports:
  config_manager.get_processing_params
  cv2
  deepface.DeepFace
  deepface.DeepFace
  numpy
  os
  subprocess
  tensorflow
  time
  typing.Any
  typing.Dict
  typing.List
  typing.Tuple

--------------------------------------------------------------------------------

[13] frame_extractor.py
Description: Module: unknown
Size: (5.3 KB, 172 lines)

Module Functions:
  extract_frames(2 args)
    Calls: 0 functions
    Called by: 1 functions

  extract_frames_with_timestamps(2 args)
    Calls: 1 functions
    Called by: 7 functions

  frames_to_timestamps(2 args)
    Calls: 1 functions
    Called by: 1 functions

  get_video_info(1 args)
    Calls: 0 functions
    Called by: 1 functions

  process_video_frames(0 args)
    Calls: 4 functions
    Called by: 0 functions

  seconds_to_timestamp(1 args)
    Calls: 0 functions
    Called by: 2 functions

Classes: None

Imports:
  config_manager.get_processing_params
  config_manager.get_video_path
  cv2
  numpy
  typing.Any
  typing.Dict
  typing.List
  typing.Tuple

--------------------------------------------------------------------------------

[14] hunyuan_translator.py
Description: Hunyuan-MT-7B Translation Client
Size: (5.2 KB, 152 lines)

Module Functions:
  test_hunyuan_translator(0 args)
    Calls: 2 functions
    Called by: 0 functions

Classes:
  HunyuanTranslator (inherits from: None)
    Methods:
      __init__(2 args)
        Calls: 0, Called by: 0
      test_connection(1 args)
        Calls: 0, Called by: 1
      translate(4 args)
        Calls: 0, Called by: 3
      translate_chinese_to_russian(2 args)
        Calls: 1, Called by: 0
      translate_english_to_russian(2 args)
        Calls: 1, Called by: 0
      translate_to_russian(3 args)
        Calls: 1, Called by: 1

Imports:
  json
  requests
  time
  typing.Any
  typing.Dict
  typing.Optional

--------------------------------------------------------------------------------

[15] load_data_to_chroma.py
Description: Load Phase 2 VLLM analysis data into ChromaDB
Size: (6.6 KB, 202 lines)

Module Functions:
  load_phase2_json(2 args)
    Calls: 0 functions
    Called by: 1 functions

  load_video_to_chroma(4 args)
    Calls: 1 functions
    Called by: 1 functions

  main(0 args)
    Calls: 1 functions
    Called by: 0 functions

Classes: None

Imports:
  datetime.datetime
  db_manager.ChromaDBManager
  json
  logging
  pathlib.Path
  sys
  typing.Optional

--------------------------------------------------------------------------------

[16] main.py
Description: Module: unknown
Size: (16.8 KB, 434 lines)

Module Functions:
  export_face_results(2 args)
    Calls: 5 functions
    Called by: 1 functions

  export_object_results(1 args)
    Calls: 3 functions
    Called by: 1 functions

  export_scene_results(1 args)
    Calls: 3 functions
    Called by: 1 functions

  export_transcription_results(1 args)
    Calls: 3 functions
    Called by: 1 functions

  export_translated_transcription_results(1 args)
    Calls: 3 functions
    Called by: 1 functions

  extract_video_frames(0 args)
    Calls: 3 functions
    Called by: 1 functions

  main(0 args)
    Calls: 5 functions
    Called by: 0 functions

  process_audio_transcription(0 args)
    Calls: 1 functions
    Called by: 1 functions

  process_single_video(4 args)
    Calls: 13 functions
    Called by: 1 functions

  process_translation(1 args)
    Calls: 0 functions
    Called by: 1 functions

  process_video_faces(2 args)
    Calls: 1 functions
    Called by: 1 functions

  process_video_objects(3 args)
    Calls: 2 functions
    Called by: 1 functions

  process_video_scenes(3 args)
    Calls: 2 functions
    Called by: 1 functions

  setup_output_directories(0 args)
    Calls: 1 functions
    Called by: 1 functions

Classes: None

Imports:
  audio_transcriber.transcribe_video_file
  config_manager.get_output_dir
  config_manager.get_video_path
  config_manager.load_config
  config_manager.set_video_path
  face_processor.detect_faces_batch
  frame_extractor.extract_frames_with_timestamps
  frame_extractor.get_video_info
  numpy
  object_detector.detect_objects_batch
  object_detector.initialize_yolo_model
  os
  pathlib.Path
  result_exporter.create_output_filename
  result_exporter.export_face_timeline_csv
  result_exporter.export_faces_csv
  result_exporter.export_objects_csv
  result_exporter.export_scenes_csv
  result_exporter.export_transcription_csv
  scene_analyzer.detect_scene_changes
  scene_analyzer.initialize_clip_model
  shutil
  typing.Any
  typing.Dict
  typing.List
  typing.Tuple

--------------------------------------------------------------------------------

[17] object_detector.py
Description: Module: unknown
Size: (8.9 KB, 251 lines)

Module Functions:
  detect_objects(3 args)
    Calls: 1 functions
    Called by: 0 functions

  detect_objects_batch(4 args)
    Calls: 3 functions
    Called by: 1 functions

  get_object_center(1 args)
    Calls: 0 functions
    Called by: 1 functions

  group_objects_by_timestamp(2 args)
    Calls: 0 functions
    Called by: 1 functions

  initialize_yolo_model(0 args)
    Calls: 0 functions
    Called by: 1 functions

  process_yolo_results_single(1 args)
    Calls: 1 functions
    Called by: 2 functions

Classes: None

Imports:
  config_manager.get_processing_params
  config_manager.get_processing_params
  numpy
  time
  torch
  typing.Any
  typing.Dict
  typing.List
  typing.Tuple
  ultralytics.YOLO

--------------------------------------------------------------------------------

[18] pdf_generator.py
Description: PDF Generator for ANPR Violation Reports
Size: (21.2 KB, 516 lines)

Module Functions: None

Classes:
  ViolationReportGenerator (inherits from: None)
    Methods:
      __init__(3 args)
        Calls: 2, Called by: 0
      _create_footer(3 args)
        Calls: 0, Called by: 0
      _create_header(3 args)
        Calls: 0, Called by: 0
      _cv2_to_reportlab_image(2 args)
        Calls: 0, Called by: 2
      _extract_plate_image(3 args)
        Calls: 0, Called by: 1
      _load_logo_as_base64(1 args)
        Calls: 0, Called by: 1
      _register_fonts(1 args)
        Calls: 0, Called by: 1
      create_violation_report(4 args)
        Calls: 3, Called by: 0
      should_generate_pdf(2 args)
        Calls: 0, Called by: 0

Imports:
  PIL.Image
  base64
  cv2
  datetime.datetime
  io
  logging
  numpy
  pathlib.Path
  reportlab.lib.colors
  reportlab.lib.colors.black
  reportlab.lib.colors.blue
  reportlab.lib.colors.gray
  reportlab.lib.colors.red
  reportlab.lib.enums.TA_CENTER
  reportlab.lib.enums.TA_LEFT
  reportlab.lib.enums.TA_RIGHT
  reportlab.lib.pagesizes.A4
  reportlab.lib.styles.ParagraphStyle
  reportlab.lib.styles.getSampleStyleSheet
  reportlab.lib.units.cm
  reportlab.lib.units.mm
  reportlab.lib.utils.ImageReader
  reportlab.pdfbase.pdfmetrics
  reportlab.pdfbase.ttfonts.TTFont
  reportlab.platypus.Image
  reportlab.platypus.Paragraph
  reportlab.platypus.SimpleDocTemplate
  reportlab.platypus.Spacer
  reportlab.platypus.Table
  reportlab.platypus.TableStyle
  reportlab.platypus.flowables.HRFlowable
  typing.Any
  typing.Dict
  typing.Optional

--------------------------------------------------------------------------------

[19] performance_analyzer.py
Description: Performance Analyzer - анализ производительности Phase 2
Size: (10.2 KB, 222 lines)

Module Functions:
  main(0 args)
    Calls: 1 functions
    Called by: 0 functions

Classes:
  PerformanceAnalyzer (inherits from: None)
    Methods:
      __init__(1 args)
        Calls: 0, Called by: 0
      analyze_json_quality(2 args)
        Calls: 0, Called by: 1
      analyze_processing_time(2 args)
        Calls: 4, Called by: 0
      calculate_metrics(2 args)
        Calls: 0, Called by: 1
      extract_segment_number(2 args)
        Calls: 0, Called by: 1
      extract_timestamp(2 args)
        Calls: 0, Called by: 3
      generate_report(2 args)
        Calls: 3, Called by: 1
      load_results(2 args)
        Calls: 0, Called by: 1

Imports:
  datetime.datetime
  datetime.timedelta
  json
  time
  typing.Any
  typing.Dict
  typing.List

--------------------------------------------------------------------------------

[20] phase1_whisper_frames.py
Description: Phase 1: Whisper Transcription + Frame Extraction
Size: (14.1 KB, 369 lines)

Module Functions:
  load_videos_config(1 args)
    Calls: 0 functions
    Called by: 1 functions

  main(0 args)
    Calls: 3 functions
    Called by: 0 functions

Classes:
  Phase1WhisperFrames (inherits from: None)
    Methods:
      __init__(2 args)
        Calls: 0, Called by: 0
      calculate_frame_resolution(3 args)
        Calls: 0, Called by: 1
      create_segments(2 args)
        Calls: 0, Called by: 1
      extract_segment_frames(6 args)
        Calls: 0, Called by: 1
      get_video_info(2 args)
        Calls: 0, Called by: 1
      initialize_whisper(1 args)
        Calls: 1, Called by: 1
      process_video_phase1(3 args)
        Calls: 8, Called by: 1
      save_phase1_results(3 args)
        Calls: 0, Called by: 1
      transcribe_segment(5 args)
        Calls: 1, Called by: 1

Imports:
  audio_extractor.check_ffmpeg_available
  audio_extractor.cleanup_temp_files
  audio_extractor.extract_audio_segment
  base64
  config_manager.set_video_path
  cv2
  datetime.datetime
  db_manager.ChromaDBManager
  json
  numpy
  pathlib.Path
  pickle
  torch
  tqdm.tqdm
  typing.Any
  typing.Dict
  typing.List
  typing.Tuple
  whisper

--------------------------------------------------------------------------------

[21] phase2_vllm_analysis.py
Description: Phase 2: VLLM Analysis
Size: (67.8 KB, 1357 lines)

Module Functions:
  main(0 args)
    Calls: 2 functions
    Called by: 0 functions

  test_model_control(0 args)
    Calls: 7 functions
    Called by: 1 functions

  tqdm(3 args)
    Calls: 0 functions
    Called by: 2 functions

Classes:
  Phase2VLLMAnalyzer (inherits from: None)
    Methods:
      __init__(3 args)
        Calls: 1, Called by: 0
      _convert_markdown_to_json(2 args)
        Calls: 0, Called by: 1
      _extract_from_markdown_blocks(2 args)
        Calls: 0, Called by: 1
      _is_structured_markdown(2 args)
        Calls: 0, Called by: 1
      analyze_segment_vllm(3 args)
        Calls: 0, Called by: 3
      auto_start_model_if_needed(2 args)
        Calls: 2, Called by: 1
      check_model_health(1 args)
        Calls: 1, Called by: 1
      check_preventive_restart(2 args)
        Calls: 0, Called by: 1
      create_vllm_prompt(3 args)
        Calls: 0, Called by: 1
      detect_quality_degradation(3 args)
        Calls: 0, Called by: 1
      extract_json_from_response(2 args)
        Calls: 3, Called by: 2
      get_base64_frames(2 args)
        Calls: 1, Called by: 1
      get_flag_path(2 args)
        Calls: 0, Called by: 3
      get_model_status(1 args)
        Calls: 1, Called by: 3
      get_previous_segment_context(3 args)
        Calls: 1, Called by: 1
      get_segments_to_process(3 args)
        Calls: 1, Called by: 1
      load_config(2 args)
        Calls: 0, Called by: 1
      load_existing_results(2 args)
        Calls: 0, Called by: 3
      load_phase1_data(2 args)
        Calls: 0, Called by: 2
      merge_results(3 args)
        Calls: 2, Called by: 1
      process_phase2_analysis(2 args)
        Calls: 23, Called by: 1
      read_status_file(2 args)
        Calls: 1, Called by: 1
      request_model_restart(3 args)
        Calls: 1, Called by: 0
      restart_model(3 args)
        Calls: 1, Called by: 4
      save_phase2_results(3 args)
        Calls: 1, Called by: 1
      start_model(3 args)
        Calls: 1, Called by: 2
      stop_model(2 args)
        Calls: 1, Called by: 1
      test_vllm_connection(1 args)
        Calls: 0, Called by: 6
      wait_for_model_restart(2 args)
        Calls: 2, Called by: 3
      wait_for_model_stop(2 args)
        Calls: 1, Called by: 1
      write_flag_file(3 args)
        Calls: 1, Called by: 3

Imports:
  base64
  cv2
  datetime.datetime
  db_manager.ChromaDBManager
  json
  json
  json
  os
  pathlib.Path
  pickle
  platform
  re
  re
  requests
  shutil
  subprocess
  sys
  time
  tqdm.tqdm
  traceback
  typing.Any
  typing.Dict
  typing.List
  typing.Optional

--------------------------------------------------------------------------------

[22] plate_detector.py
Description: Plate Detector Module - YOLO-based detection for vehicles and license plates
Size: (9.0 KB, 261 lines)

Module Functions: None

Classes:
  PlateDetector (inherits from: None)
    Methods:
      __init__(2 args)
        Calls: 2, Called by: 0
      _get_default_config(1 args)
        Calls: 0, Called by: 1
      _init_models(1 args)
        Calls: 0, Called by: 1
      detect_plates(2 args)
        Calls: 0, Called by: 0
      detect_vehicles(2 args)
        Calls: 0, Called by: 0
      extract_plate_zones_from_vehicle(3 args)
        Calls: 0, Called by: 0
      extract_region(4 args)
        Calls: 0, Called by: 0
      select_primary_vehicle(3 args)
        Calls: 0, Called by: 0

Imports:
  cv2
  logging
  numpy
  pathlib.Path
  typing.Any
  typing.Dict
  typing.List
  typing.Optional
  ultralytics.YOLO

--------------------------------------------------------------------------------

[23] plate_recognizer.py
Description: Plate Recognizer Module - OCR and plate structure detection
Size: (31.9 KB, 704 lines)

Module Functions:
  fix_kg_text(2 args)
    Calls: 0 functions
    Called by: 9 functions

  is_above(2 args)
    Calls: 0 functions
    Called by: 6 functions

Classes:
  PlateRecognizer (inherits from: None)
    Methods:
      __init__(1 args)
        Calls: 1, Called by: 0
      _detect_plate_structure(2 args)
        Calls: 15, Called by: 1
      _load_plate_patterns(1 args)
        Calls: 0, Called by: 1
      _safe_extract_ocr_results(2 args)
        Calls: 0, Called by: 1
      recognize(2 args)
        Calls: 2, Called by: 0

  PlateStructure (inherits from: None)
    Methods: None

Imports:
  dataclasses.dataclass
  logging
  paddleocr.PaddleOCR
  re
  typing.Any
  typing.Dict
  typing.List
  typing.Optional
  typing.Tuple

--------------------------------------------------------------------------------

[24] pose_detector.py
Description: Human pose detection and gesture analysis module using MediaPipe Pose.
Size: (18.4 KB, 471 lines)

Module Functions:
  analyze_gesture(2 args)
    Calls: 0 functions
    Called by: 1 functions

  calculate_pose_bbox(2 args)
    Calls: 0 functions
    Called by: 1 functions

  detect_poses_batch(5 args)
    Calls: 3 functions
    Called by: 1 functions

  export_pose_results(2 args)
    Calls: 2 functions
    Called by: 1 functions

  extract_pose_metrics(2 args)
    Calls: 0 functions
    Called by: 1 functions

  group_poses_by_timestamp(2 args)
    Calls: 0 functions
    Called by: 1 functions

  initialize_pose_model(0 args)
    Calls: 0 functions
    Called by: 1 functions

  main(0 args)
    Calls: 2 functions
    Called by: 0 functions

  process_single_frame_pose(4 args)
    Calls: 3 functions
    Called by: 1 functions

  process_single_video_poses(2 args)
    Calls: 5 functions
    Called by: 1 functions

Classes: None

Imports:
  config_manager.get_output_dir
  config_manager.get_processing_params
  config_manager.get_video_path
  config_manager.set_video_path
  cv2
  frame_extractor.extract_frames_with_timestamps
  math
  mediapipe
  numpy
  pathlib.Path
  result_exporter.create_output_filename
  result_exporter.export_objects_csv
  time
  typing.Any
  typing.Dict
  typing.List
  typing.Optional
  typing.Tuple

--------------------------------------------------------------------------------

[25] progress_monitor.py
Description: Progress Monitor - утилита для мониторинга прогресса Phase 2
Size: (2.6 KB, 69 lines)

Module Functions:
  monitor_progress(0 args)
    Calls: 0 functions
    Called by: 0 functions

Classes: None

Imports:
  datetime.datetime
  json
  pathlib.Path
  time

--------------------------------------------------------------------------------

[26] result_exporter.py
Description: Module: unknown
Size: (3.5 KB, 94 lines)

Module Functions:
  create_output_filename(2 args)
    Calls: 1 functions
    Called by: 12 functions

  export_face_timeline_csv(2 args)
    Calls: 0 functions
    Called by: 1 functions

  export_faces_csv(2 args)
    Calls: 0 functions
    Called by: 1 functions

  export_objects_csv(2 args)
    Calls: 0 functions
    Called by: 6 functions

  export_scenes_csv(2 args)
    Calls: 0 functions
    Called by: 1 functions

  export_transcription_csv(2 args)
    Calls: 0 functions
    Called by: 3 functions

Classes: None

Imports:
  config_manager.get_output_dir
  pandas
  pathlib.Path
  typing.Any
  typing.Dict
  typing.List

--------------------------------------------------------------------------------

[27] run_vllm_analysis.py
Description: VLLM Video Analysis Module - Отдельный модуль для анализа видео через Vision-Language модель
Size: (6.7 KB, 188 lines)

Module Functions:
  export_vllm_results(2 args)
    Calls: 2 functions
    Called by: 1 functions

  load_context_from_other_modules(1 args)
    Calls: 0 functions
    Called by: 1 functions

  main(0 args)
    Calls: 1 functions
    Called by: 0 functions

  process_single_video_vllm(1 args)
    Calls: 5 functions
    Called by: 1 functions

Classes: None

Imports:
  config_manager.get_video_path
  config_manager.load_config
  config_manager.set_video_path
  frame_extractor.extract_frames_with_timestamps
  json
  os
  pathlib.Path
  result_exporter.create_output_filename
  result_exporter.export_objects_csv
  traceback
  typing.Any
  typing.Dict
  typing.List
  vllm_client.VLLMClient
  vllm_client.analyze_video_frames_vllm

--------------------------------------------------------------------------------

[28] scene_analyzer.py
Description: Module: unknown
Size: (14.6 KB, 352 lines)

Module Functions:
  analyze_scene(3 args)
    Calls: 1 functions
    Called by: 0 functions

  detect_scene_changes(4 args)
    Calls: 3 functions
    Called by: 1 functions

  get_fallback_scene_description(1 args)
    Calls: 0 functions
    Called by: 1 functions

  get_scene_description(1 args)
    Calls: 2 functions
    Called by: 2 functions

  initialize_clip_model(0 args)
    Calls: 0 functions
    Called by: 2 functions

  simplify_scene_name(1 args)
    Calls: 0 functions
    Called by: 1 functions

Classes: None

Imports:
  PIL.Image
  config_manager.get_processing_params
  config_manager.get_video_info
  config_manager.get_video_path
  cv2
  numpy
  open_clip
  open_clip
  time
  torch
  torch
  torch
  torch
  typing.Any
  typing.Dict
  typing.List
  typing.Tuple

--------------------------------------------------------------------------------

[29] test_search.py
Description: Test ChromaDB search functionality
Size: (3.8 KB, 135 lines)

Module Functions:
  format_time(1 args)
    Calls: 0 functions
    Called by: 4 functions

  main(0 args)
    Calls: 3 functions
    Called by: 0 functions

  print_result(2 args)
    Calls: 2 functions
    Called by: 1 functions

Classes: None

Imports:
  db_manager.ChromaDBManager
  sys

--------------------------------------------------------------------------------

[30] translator.py
Description: Translation module using local LLM via text-generation-webui API.
Size: (10.7 KB, 321 lines)

Module Functions:
  call_llm_api(4 args)
    Calls: 0 functions
    Called by: 1 functions

  group_segments_into_chunks(2 args)
    Calls: 0 functions
    Called by: 1 functions

  parse_translated_line(1 args)
    Calls: 0 functions
    Called by: 1 functions

  parse_translated_response(2 args)
    Calls: 1 functions
    Called by: 1 functions

  save_translation_debug_info(3 args)
    Calls: 0 functions
    Called by: 0 functions

  translate_chunk(4 args)
    Calls: 2 functions
    Called by: 1 functions

  translate_transcription_segments(1 args)
    Calls: 3 functions
    Called by: 0 functions

Classes: None

Imports:
  config_manager.get_processing_params
  json
  pathlib.Path
  re
  requests
  time
  typing.Any
  typing.Dict
  typing.List

--------------------------------------------------------------------------------

[31] unified_anpr_system.py
Description: Unified ANPR System - Main orchestrator module
Size: (31.8 KB, 765 lines)

Module Functions:
  main(0 args)
    Calls: 2 functions
    Called by: 0 functions

Classes:
  RadarData (inherits from: None)
    Methods: None

  UnifiedANPRSystem (inherits from: None)
    Methods:
      __init__(2 args)
        Calls: 2, Called by: 0
      _enhance_plate_image(2 args)
        Calls: 0, Called by: 2
      _extract_radar_data(2 args)
        Calls: 0, Called by: 1
      _generate_summary(2 args)
        Calls: 0, Called by: 1
      _get_default_config(1 args)
        Calls: 0, Called by: 1
      _ocr_pass_fullscreen(2 args)
        Calls: 0, Called by: 1
      _ocr_pass_plate_zones(3 args)
        Calls: 1, Called by: 1
      _ocr_pass_vehicle_zones(3 args)
        Calls: 0, Called by: 1
      _process_yolo_plates(3 args)
        Calls: 1, Called by: 1
      _setup_logging(1 args)
        Calls: 0, Called by: 1
      analyze_frame(2 args)
        Calls: 7, Called by: 2
      process_video(3 args)
        Calls: 2, Called by: 1

  Vehicle (inherits from: None)
    Methods:
      to_dict(1 args)
        Calls: 0, Called by: 2

Imports:
  cv2
  dataclasses.asdict
  dataclasses.dataclass
  datetime.datetime
  json
  logging
  numpy
  os
  pathlib.Path
  plate_detector.PlateDetector
  plate_recognizer.PlateRecognizer
  plate_recognizer.PlateStructure
  re
  time
  typing.Any
  typing.Dict
  typing.List
  typing.Optional

--------------------------------------------------------------------------------

[32] vehicle_compcars_analyzer.py
Description: CompCars-based vehicle analysis module for detailed make/model classification.
Size: (19.5 KB, 481 lines)

Module Functions:
  analyze_vehicles_batch(6 args)
    Calls: 4 functions
    Called by: 1 functions

  classify_vehicle_region(4 args)
    Calls: 0 functions
    Called by: 1 functions

  create_compcars_classifier(1 args)
    Calls: 0 functions
    Called by: 1 functions

  create_compcars_transform(0 args)
    Calls: 0 functions
    Called by: 1 functions

  export_vehicle_analysis_results(2 args)
    Calls: 2 functions
    Called by: 1 functions

  get_compcars_class_names(0 args)
    Calls: 0 functions
    Called by: 1 functions

  group_vehicle_analysis_by_timestamp(2 args)
    Calls: 0 functions
    Called by: 1 functions

  initialize_compcars_models(0 args)
    Calls: 2 functions
    Called by: 1 functions

  main(0 args)
    Calls: 2 functions
    Called by: 0 functions

  process_frame_vehicles(5 args)
    Calls: 1 functions
    Called by: 1 functions

  process_single_video_compcars(2 args)
    Calls: 5 functions
    Called by: 1 functions

Classes: None

Imports:
  config_manager.get_output_dir
  config_manager.get_processing_params
  config_manager.get_video_path
  config_manager.set_video_path
  cv2
  frame_extractor.extract_frames_with_timestamps
  json
  numpy
  pathlib.Path
  result_exporter.create_output_filename
  result_exporter.export_objects_csv
  time
  torch
  torch.nn
  torchvision.models
  torchvision.transforms
  typing.Any
  typing.Dict
  typing.List
  typing.Tuple
  ultralytics.YOLO

--------------------------------------------------------------------------------

[33] vehicle_yolo_detector.py
Description: YOLO-based vehicle detection module for video processing pipeline.
Size: (13.6 KB, 360 lines)

Module Functions:
  detect_vehicles_batch(4 args)
    Calls: 3 functions
    Called by: 1 functions

  export_vehicle_results(2 args)
    Calls: 2 functions
    Called by: 1 functions

  get_vehicle_center(1 args)
    Calls: 0 functions
    Called by: 1 functions

  group_vehicles_by_timestamp(2 args)
    Calls: 0 functions
    Called by: 1 functions

  initialize_yolo_vehicle_model(0 args)
    Calls: 0 functions
    Called by: 1 functions

  main(0 args)
    Calls: 2 functions
    Called by: 0 functions

  process_single_video_yolo_vehicles(2 args)
    Calls: 5 functions
    Called by: 1 functions

  process_yolo_vehicle_results(2 args)
    Calls: 1 functions
    Called by: 1 functions

Classes: None

Imports:
  config_manager.get_output_dir
  config_manager.get_processing_params
  config_manager.get_video_path
  config_manager.set_video_path
  cv2
  frame_extractor.extract_frames_with_timestamps
  numpy
  pathlib.Path
  result_exporter.create_output_filename
  result_exporter.export_objects_csv
  time
  torch
  typing.Any
  typing.Dict
  typing.List
  typing.Tuple
  ultralytics.YOLO

--------------------------------------------------------------------------------

[34] video_transcriber.py
Description: Video Transcription Module - Отдельный модуль для транскрипции видео через Whisper
Size: (10.1 KB, 292 lines)

Module Functions:
  clean_repetitive_segments(1 args)
    Calls: 0 functions
    Called by: 0 functions

  export_transcription_results(2 args)
    Calls: 2 functions
    Called by: 1 functions

  format_timestamp(1 args)
    Calls: 0 functions
    Called by: 2 functions

  initialize_whisper_model(0 args)
    Calls: 0 functions
    Called by: 1 functions

  main(0 args)
    Calls: 1 functions
    Called by: 0 functions

  process_single_video_transcription(1 args)
    Calls: 4 functions
    Called by: 1 functions

  process_transcription_segments(2 args)
    Calls: 2 functions
    Called by: 1 functions

  transcribe_video_file(2 args)
    Calls: 1 functions
    Called by: 1 functions

Classes: None

Imports:
  config_manager.get_video_path
  config_manager.load_config
  config_manager.set_video_path
  pathlib.Path
  result_exporter.create_output_filename
  result_exporter.export_transcription_csv
  time
  torch
  traceback
  typing.Any
  typing.Dict
  typing.List
  whisper

--------------------------------------------------------------------------------

[35] vllm_client.py
Description: VLLM Client for video frame analysis using Qwen 2.5 VL model
Size: (10.9 KB, 276 lines)

Module Functions:
  analyze_video_frames_vllm(3 args)
    Calls: 3 functions
    Called by: 1 functions

  prepare_context_for_frame(2 args)
    Calls: 0 functions
    Called by: 1 functions

Classes:
  VLLMClient (inherits from: None)
    Methods:
      __init__(2 args)
        Calls: 1, Called by: 0
      analyze_frame(3 args)
        Calls: 1, Called by: 1
      frame_to_base64(2 args)
        Calls: 1, Called by: 1
      load_config(2 args)
        Calls: 0, Called by: 1
      resize_frame_if_needed(2 args)
        Calls: 0, Called by: 1
      test_connection(1 args)
        Calls: 0, Called by: 1

Imports:
  base64
  cv2
  json
  numpy
  pathlib.Path
  requests
  time
  typing.Any
  typing.Dict
  typing.List
  typing.Optional

--------------------------------------------------------------------------------

[36] vllm_scene_director.py
Description: VLLM Scene Director - "Режиссер" для умной нарезки видео на сцены
Size: (22.3 KB, 516 lines)

Module Functions:
  export_segmentation_results(2 args)
    Calls: 0 functions
    Called by: 1 functions

  main(0 args)
    Calls: 2 functions
    Called by: 0 functions

Classes:
  VLLMSceneDirector (inherits from: None)
    Methods:
      __init__(1 args)
        Calls: 0, Called by: 0
      analyze_multiple_frames_vllm(3 args)
        Calls: 0, Called by: 1
      analyze_segment_with_vllm(3 args)
        Calls: 1, Called by: 1
      create_video_segments(3 args)
        Calls: 0, Called by: 1
      extract_mini_frames(3 args)
        Calls: 1, Called by: 1
      load_transcription_segments(2 args)
        Calls: 0, Called by: 1
      process_video_segmentation(2 args)
        Calls: 5, Called by: 1

Imports:
  base64
  config_manager.load_config
  config_manager.set_video_path
  cv2
  frame_extractor.extract_frames_with_timestamps
  json
  numpy
  pandas
  pathlib.Path
  time
  traceback
  typing.Any
  typing.Dict
  typing.List
  typing.Tuple
  vllm_client.VLLMClient

--------------------------------------------------------------------------------
