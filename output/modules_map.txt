MODULES MAP:

[1] anpr_detector.py - ANPR Детектор - РЕАЛЬНАЯ боевая версия для распознавания номерных знаков (30.4 KB, 726 lines)

  Classes (1):
    - ANPRDetector (base: None, methods: 21)
      * __init__() [2 args, 1 calls, 0 called by]
      * _analyze_car_brand() [2 args, 1 calls, 1 called by]
      * _analyze_for_violations() [4 args, 0 calls, 1 called by]
      * _check_gpu_available() [1 args, 0 calls, 2 called by]
      * _classify_car_type() [2 args, 0 calls, 2 called by]
      * _detect_car_color() [2 args, 0 calls, 2 called by]
      * _detect_traffic_light_violations() [2 args, 0 calls, 1 called by]
      * _detect_vehicles() [2 args, 1 calls, 2 called by]
      * _extract_text_regions() [2 args, 0 calls, 3 called by]
      * _get_plate_format() [2 args, 0 calls, 1 called by]
      * _get_plate_type() [2 args, 0 calls, 1 called by]
      * _get_region_from_plate() [2 args, 0 calls, 1 called by]
      * _get_vehicle_class_name() [2 args, 0 calls, 1 called by]
      * _load_models() [1 args, 1 calls, 1 called by]
      * _preprocess_image() [2 args, 0 calls, 2 called by]
      * _validate_license_plate() [2 args, 3 calls, 1 called by]
      * analyze_image() [2 args, 5 calls, 0 called by]
      * detect_car_brands() [2 args, 6 calls, 1 called by]
      * detect_license_plates() [2 args, 4 calls, 1 called by]
      * detect_streets() [2 args, 2 calls, 1 called by]
      * detect_violations() [2 args, 2 calls, 1 called by]

  Imports (16):
    - PIL.Image
    - cv2
    - datetime.datetime
    - logging
    - numpy
    - os
    - paddle
    - paddleocr
    - pathlib.Path
    - re
    - time
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional
    - ultralytics.YOLO


[2] anpr_processor.py - ANPR (Automatic Number Plate Recognition) module for license plate detection and recognition. (24.7 KB, 644 lines)

  Module Functions (15):
    - convert_cyrillic_to_latin() [1 args, 0 calls, 1 called by]
    - detect_license_plates_batch() [6 args, 3 calls, 1 called by]
    - enhance_plate_image() [1 args, 0 calls, 1 called by]
    - export_anpr_results() [2 args, 2 calls, 1 called by]
    - extract_plate_regions() [1 args, 0 calls, 1 called by]
    - get_kazakhstan_regions() [0 args, 0 calls, 2 called by]
    - get_license_plate_patterns() [0 args, 5 calls, 1 called by]
    - get_russia_regions() [0 args, 0 calls, 3 called by]
    - group_plates_by_timestamp() [2 args, 0 calls, 1 called by]
    - initialize_anpr_models() [0 args, 1 calls, 1 called by]
    - main() [0 args, 2 calls, 0 called by]
    - process_frame_anpr() [4 args, 3 calls, 1 called by]
    - process_single_video_anpr() [2 args, 5 calls, 1 called by]
    - recognize_plate_text() [2 args, 1 calls, 1 called by]
    - validate_license_plate() [2 args, 1 calls, 1 called by]

  Imports (19):
    - config_manager.get_output_dir
    - config_manager.get_processing_params
    - config_manager.get_video_path
    - config_manager.set_video_path
    - cv2
    - frame_extractor.extract_frames_with_timestamps
    - numpy
    - paddleocr.PaddleOCR
    - pathlib.Path
    - re
    - result_exporter.create_output_filename
    - result_exporter.export_objects_csv
    - time
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional
    - typing.Tuple
    - ultralytics.YOLO


[3] anpr_walker.py - ANPR Walker - Recursive image processor with unified ANPR system (41.9 KB, 1000 lines)

  Module Functions (1):
    - main() [0 args, 1 calls, 0 called by]

  Classes (1):
    - ANPRWalker (base: None, methods: 13)
      * __init__() [2 args, 1 calls, 0 called by]
      * _finalize_stats() [1 args, 0 calls, 2 called by]
      * _group_violation_sequences() [2 args, 2 calls, 1 called by]
      * _parse_timestamp_from_filename() [2 args, 0 calls, 2 called by]
      * _safe_imread() [2 args, 0 calls, 2 called by]
      * _select_best_frame_from_group() [2 args, 1 calls, 1 called by]
      * _setup_logging() [1 args, 0 calls, 1 called by]
      * find_images() [2 args, 0 calls, 1 called by]
      * get_metadata_path() [2 args, 0 calls, 4 called by]
      * process_image() [2 args, 1 calls, 1 called by]
      * run() [2 args, 10 calls, 1 called by]
      * save_metadata() [3 args, 1 calls, 1 called by]
      * should_process() [2 args, 1 calls, 1 called by]

  Imports (17):
    - PIL.Image
    - argparse
    - cv2
    - datetime.datetime
    - dotenv.load_dotenv
    - json
    - logging
    - numpy
    - os
    - pathlib.Path
    - pdf_generator.ViolationReportGenerator
    - time
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional
    - unified_anpr_system.UnifiedANPRSystem


[4] audio_extractor.py - Audio Extractor - Вспомогательный модуль для извлечения аудио сегментов (2.7 KB, 89 lines)

  Module Functions (3):
    - check_ffmpeg_available() [0 args, 0 calls, 2 called by]
    - cleanup_temp_files() [1 args, 0 calls, 2 called by]
    - extract_audio_segment() [4 args, 0 calls, 2 called by]

  Imports (5):
    - glob
    - os
    - pathlib.Path
    - subprocess
    - typing.Optional


[5] audio_transcriber.py - transcribe audio track from video using whisper (4.8 KB, 140 lines)

  Module Functions (6):
    - extract_audio_from_video() [2 args, 0 calls, 1 called by]
    - format_timestamp() [1 args, 0 calls, 4 called by]
    - initialize_whisper_model() [0 args, 0 calls, 1 called by]
    - process_transcription_segments() [2 args, 4 calls, 1 called by]
    - transcribe_audio() [3 args, 0 calls, 1 called by]
    - transcribe_video_file() [0 args, 7 calls, 1 called by]

  Imports (11):
    - config_manager.get_audio_dir
    - config_manager.get_processing_params
    - config_manager.get_video_path
    - json
    - pathlib.Path
    - subprocess
    - torch
    - typing.Any
    - typing.Dict
    - typing.List
    - whisper


[6] chunked_video_analyzer.py - Chunked Video Analyzer - Прототип v2 (17.2 KB, 437 lines)

  Module Functions (1):
    - main() [0 args, 4 calls, 0 called by]

  Classes (1):
    - ChunkedVideoAnalyzer (base: None, methods: 11)
      * __init__() [2 args, 1 calls, 0 called by]
      * analyze_segment() [3 args, 0 calls, 1 called by]
      * calculate_frame_resolution() [3 args, 0 calls, 1 called by]
      * create_vllm_prompt() [3 args, 0 calls, 1 called by]
      * export_results() [3 args, 0 calls, 1 called by]
      * extract_segment_frames() [6 args, 0 calls, 1 called by]
      * get_video_info() [2 args, 0 calls, 1 called by]
      * initialize_models() [1 args, 1 calls, 1 called by]
      * load_config() [2 args, 0 calls, 1 called by]
      * process_video() [2 args, 7 calls, 1 called by]
      * transcribe_segment() [4 args, 1 calls, 1 called by]

  Imports (21):
    - audio_extractor.check_ffmpeg_available
    - audio_extractor.cleanup_temp_files
    - audio_extractor.extract_audio_segment
    - base64
    - config_manager.set_video_path
    - cv2
    - json
    - numpy
    - pathlib.Path
    - result_exporter.create_output_filename
    - time
    - torch
    - tqdm.tqdm
    - traceback
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional
    - typing.Tuple
    - vllm_client.VLLMClient
    - whisper


[7] config_manager.py - Module: unknown (6.2 KB, 161 lines)

  Module Functions (7):
    - get_audio_dir() [0 args, 0 calls, 1 called by]
    - get_output_dir() [0 args, 0 calls, 2 called by]
    - get_processing_params() [0 args, 0 calls, 13 called by]
    - get_video_info() [0 args, 1 calls, 0 called by]
    - get_video_path() [0 args, 0 calls, 9 called by]
    - load_config() [0 args, 0 calls, 5 called by]
    - set_video_path() [1 args, 0 calls, 10 called by]

  Imports (6):
    - dotenv.load_dotenv
    - frame_extractor.get_video_info
    - os
    - pathlib.Path
    - typing.Any
    - typing.Dict


[8] db_manager.py - PostgreSQL Database Manager for Video Tagging (17.3 KB, 513 lines)

  Classes (2):
    - EmbeddingModel (base: None, methods: 2)
      * __new__() [1 args, 0 calls, 0 called by]
      * encode() [2 args, 0 calls, 0 called by]
    - PostgresDBManager (base: None, methods: 13)
      * __del__() [1 args, 1 calls, 0 called by]
      * __init__() [6 args, 1 calls, 0 called by]
      * _ensure_connection() [1 args, 1 calls, 8 called by]
      * _get_connection() [1 args, 0 calls, 2 called by]
      * add_segments() [3 args, 1 calls, 0 called by]
      * close() [1 args, 0 calls, 1 called by]
      * create_or_update_video_file() [9 args, 1 calls, 0 called by]
      * delete_video_segments() [2 args, 1 calls, 0 called by]
      * get_collection_stats() [1 args, 1 calls, 0 called by]
      * get_video_status() [2 args, 1 calls, 0 called by]
      * list_videos() [2 args, 1 calls, 0 called by]
      * search() [5 args, 1 calls, 0 called by]
      * update_video_status() [2 args, 1 calls, 0 called by]

  Imports (12):
    - datetime.datetime
    - json
    - logging
    - pathlib.Path
    - pgvector.psycopg2.register_vector
    - psycopg2
    - psycopg2.extras.RealDictCursor
    - sentence_transformers.SentenceTransformer
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional


[9] db_manager_chromadb_backup.py - ChromaDB Manager for Video Tagging (16.8 KB, 480 lines)

  Classes (1):
    - ChromaDBManager (base: None, methods: 10)
      * __init__() [2 args, 0 calls, 0 called by]
      * add_segments() [3 args, 0 calls, 0 called by]
      * create_or_update_video_file() [9 args, 0 calls, 0 called by]
      * delete_video_segments() [2 args, 0 calls, 0 called by]
      * get_collection_stats() [1 args, 0 calls, 0 called by]
      * get_video_status() [2 args, 0 calls, 1 called by]
      * list_videos() [2 args, 0 calls, 0 called by]
      * reset_collections() [1 args, 0 calls, 0 called by]
      * search() [5 args, 0 calls, 0 called by]
      * update_video_status() [2 args, 1 calls, 0 called by]

  Imports (11):
    - chromadb
    - chromadb.config.Settings
    - datetime.datetime
    - datetime.datetime
    - json
    - logging
    - pathlib.Path
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional


[10] db_manager_postgres.py - PostgreSQL Database Manager for Video Tagging (17.3 KB, 513 lines)

  Classes (2):
    - EmbeddingModel (base: None, methods: 2)
      * __new__() [1 args, 0 calls, 0 called by]
      * encode() [2 args, 0 calls, 0 called by]
    - PostgresDBManager (base: None, methods: 13)
      * __del__() [1 args, 1 calls, 0 called by]
      * __init__() [6 args, 1 calls, 0 called by]
      * _ensure_connection() [1 args, 1 calls, 8 called by]
      * _get_connection() [1 args, 0 calls, 2 called by]
      * add_segments() [3 args, 1 calls, 0 called by]
      * close() [1 args, 0 calls, 1 called by]
      * create_or_update_video_file() [9 args, 1 calls, 0 called by]
      * delete_video_segments() [2 args, 1 calls, 0 called by]
      * get_collection_stats() [1 args, 1 calls, 0 called by]
      * get_video_status() [2 args, 1 calls, 0 called by]
      * list_videos() [2 args, 1 calls, 0 called by]
      * search() [5 args, 1 calls, 0 called by]
      * update_video_status() [2 args, 1 calls, 0 called by]

  Imports (12):
    - datetime.datetime
    - json
    - logging
    - pathlib.Path
    - pgvector.psycopg2.register_vector
    - psycopg2
    - psycopg2.extras.RealDictCursor
    - sentence_transformers.SentenceTransformer
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional


[11] debug_vllm.py - Debug VLLM - отладка конкретных проблемных сегментов (2.7 KB, 82 lines)

  Module Functions (1):
    - debug_segment() [1 args, 0 calls, 0 called by]

  Imports (2):
    - json
    - phase2_vllm_analysis.Phase2VLLMAnalyzer


[12] face_processor.py - Face detection and clustering module using direct TensorFlow models for high performance. (22.4 KB, 607 lines)

  Module Functions (11):
    - cluster_faces_to_persons() [3 args, 1 calls, 1 called by]
    - detect_faces() [2 args, 1 calls, 0 called by]
    - detect_faces_batch() [2 args, 6 calls, 1 called by]
    - detect_faces_single_frame() [2 args, 0 calls, 2 called by]
    - group_faces_by_timestamp() [2 args, 0 calls, 1 called by]
    - initialize_face_models() [0 args, 0 calls, 1 called by]
    - is_same_person() [3 args, 0 calls, 1 called by]
    - preprocess_face_for_tf() [1 args, 0 calls, 1 called by]
    - process_faces_batch_tf() [1 args, 2 calls, 1 called by]
    - process_faces_with_deepface() [1 args, 0 calls, 1 called by]
    - process_faces_with_tf_models() [1 args, 1 calls, 1 called by]

  Imports (13):
    - config_manager.get_processing_params
    - cv2
    - deepface.DeepFace
    - deepface.DeepFace
    - numpy
    - os
    - subprocess
    - tensorflow
    - time
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Tuple


[13] frame_extractor.py - Module: unknown (5.3 KB, 172 lines)

  Module Functions (6):
    - extract_frames() [2 args, 0 calls, 1 called by]
    - extract_frames_with_timestamps() [2 args, 1 calls, 7 called by]
    - frames_to_timestamps() [2 args, 1 calls, 1 called by]
    - get_video_info() [1 args, 0 calls, 1 called by]
    - process_video_frames() [0 args, 4 calls, 0 called by]
    - seconds_to_timestamp() [1 args, 0 calls, 2 called by]

  Imports (8):
    - config_manager.get_processing_params
    - config_manager.get_video_path
    - cv2
    - numpy
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Tuple


[14] hunyuan_translator.py - Hunyuan-MT-7B Translation Client (5.2 KB, 152 lines)

  Module Functions (1):
    - test_hunyuan_translator() [0 args, 2 calls, 0 called by]

  Classes (1):
    - HunyuanTranslator (base: None, methods: 6)
      * __init__() [2 args, 0 calls, 0 called by]
      * test_connection() [1 args, 0 calls, 1 called by]
      * translate() [4 args, 0 calls, 3 called by]
      * translate_chinese_to_russian() [2 args, 1 calls, 0 called by]
      * translate_english_to_russian() [2 args, 1 calls, 0 called by]
      * translate_to_russian() [3 args, 1 calls, 1 called by]

  Imports (6):
    - json
    - requests
    - time
    - typing.Any
    - typing.Dict
    - typing.Optional


[15] load_data_to_chroma.py - Load Phase 2 VLLM analysis data into ChromaDB (6.6 KB, 202 lines)

  Module Functions (3):
    - load_phase2_json() [2 args, 0 calls, 1 called by]
    - load_video_to_chroma() [4 args, 1 calls, 1 called by]
    - main() [0 args, 1 calls, 0 called by]

  Imports (7):
    - datetime.datetime
    - db_manager.ChromaDBManager
    - json
    - logging
    - pathlib.Path
    - sys
    - typing.Optional


[16] main.py - Module: unknown (16.8 KB, 434 lines)

  Module Functions (14):
    - export_face_results() [2 args, 5 calls, 1 called by]
    - export_object_results() [1 args, 3 calls, 1 called by]
    - export_scene_results() [1 args, 3 calls, 1 called by]
    - export_transcription_results() [1 args, 3 calls, 1 called by]
    - export_translated_transcription_results() [1 args, 3 calls, 1 called by]
    - extract_video_frames() [0 args, 3 calls, 1 called by]
    - main() [0 args, 5 calls, 0 called by]
    - process_audio_transcription() [0 args, 1 calls, 1 called by]
    - process_single_video() [4 args, 13 calls, 1 called by]
    - process_translation() [1 args, 0 calls, 1 called by]
    - process_video_faces() [2 args, 1 calls, 1 called by]
    - process_video_objects() [3 args, 2 calls, 1 called by]
    - process_video_scenes() [3 args, 2 calls, 1 called by]
    - setup_output_directories() [0 args, 1 calls, 1 called by]

  Imports (26):
    - audio_transcriber.transcribe_video_file
    - config_manager.get_output_dir
    - config_manager.get_video_path
    - config_manager.load_config
    - config_manager.set_video_path
    - face_processor.detect_faces_batch
    - frame_extractor.extract_frames_with_timestamps
    - frame_extractor.get_video_info
    - numpy
    - object_detector.detect_objects_batch
    - object_detector.initialize_yolo_model
    - os
    - pathlib.Path
    - result_exporter.create_output_filename
    - result_exporter.export_face_timeline_csv
    - result_exporter.export_faces_csv
    - result_exporter.export_objects_csv
    - result_exporter.export_scenes_csv
    - result_exporter.export_transcription_csv
    - scene_analyzer.detect_scene_changes
    - scene_analyzer.initialize_clip_model
    - shutil
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Tuple


[17] object_detector.py - Module: unknown (8.9 KB, 251 lines)

  Module Functions (6):
    - detect_objects() [3 args, 1 calls, 0 called by]
    - detect_objects_batch() [4 args, 3 calls, 1 called by]
    - get_object_center() [1 args, 0 calls, 1 called by]
    - group_objects_by_timestamp() [2 args, 0 calls, 1 called by]
    - initialize_yolo_model() [0 args, 0 calls, 1 called by]
    - process_yolo_results_single() [1 args, 1 calls, 2 called by]

  Imports (10):
    - config_manager.get_processing_params
    - config_manager.get_processing_params
    - numpy
    - time
    - torch
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Tuple
    - ultralytics.YOLO


[18] pdf_generator.py - PDF Generator for ANPR Violation Reports (21.2 KB, 516 lines)

  Classes (1):
    - ViolationReportGenerator (base: None, methods: 9)
      * __init__() [3 args, 2 calls, 0 called by]
      * _create_footer() [3 args, 0 calls, 0 called by]
      * _create_header() [3 args, 0 calls, 0 called by]
      * _cv2_to_reportlab_image() [2 args, 0 calls, 2 called by]
      * _extract_plate_image() [3 args, 0 calls, 1 called by]
      * _load_logo_as_base64() [1 args, 0 calls, 1 called by]
      * _register_fonts() [1 args, 0 calls, 1 called by]
      * create_violation_report() [4 args, 3 calls, 0 called by]
      * should_generate_pdf() [2 args, 0 calls, 0 called by]

  Imports (34):
    - PIL.Image
    - base64
    - cv2
    - datetime.datetime
    - io
    - logging
    - numpy
    - pathlib.Path
    - reportlab.lib.colors
    - reportlab.lib.colors.black
    - reportlab.lib.colors.blue
    - reportlab.lib.colors.gray
    - reportlab.lib.colors.red
    - reportlab.lib.enums.TA_CENTER
    - reportlab.lib.enums.TA_LEFT
    - reportlab.lib.enums.TA_RIGHT
    - reportlab.lib.pagesizes.A4
    - reportlab.lib.styles.ParagraphStyle
    - reportlab.lib.styles.getSampleStyleSheet
    - reportlab.lib.units.cm
    - reportlab.lib.units.mm
    - reportlab.lib.utils.ImageReader
    - reportlab.pdfbase.pdfmetrics
    - reportlab.pdfbase.ttfonts.TTFont
    - reportlab.platypus.Image
    - reportlab.platypus.Paragraph
    - reportlab.platypus.SimpleDocTemplate
    - reportlab.platypus.Spacer
    - reportlab.platypus.Table
    - reportlab.platypus.TableStyle
    - reportlab.platypus.flowables.HRFlowable
    - typing.Any
    - typing.Dict
    - typing.Optional


[19] performance_analyzer.py - Performance Analyzer - анализ производительности Phase 2 (10.2 KB, 222 lines)

  Module Functions (1):
    - main() [0 args, 1 calls, 0 called by]

  Classes (1):
    - PerformanceAnalyzer (base: None, methods: 8)
      * __init__() [1 args, 0 calls, 0 called by]
      * analyze_json_quality() [2 args, 0 calls, 1 called by]
      * analyze_processing_time() [2 args, 4 calls, 0 called by]
      * calculate_metrics() [2 args, 0 calls, 1 called by]
      * extract_segment_number() [2 args, 0 calls, 1 called by]
      * extract_timestamp() [2 args, 0 calls, 3 called by]
      * generate_report() [2 args, 3 calls, 1 called by]
      * load_results() [2 args, 0 calls, 1 called by]

  Imports (7):
    - datetime.datetime
    - datetime.timedelta
    - json
    - time
    - typing.Any
    - typing.Dict
    - typing.List


[20] phase1_whisper_frames.py - Phase 1: Whisper Transcription + Frame Extraction (14.1 KB, 369 lines)

  Module Functions (2):
    - load_videos_config() [1 args, 0 calls, 1 called by]
    - main() [0 args, 3 calls, 0 called by]

  Classes (1):
    - Phase1WhisperFrames (base: None, methods: 9)
      * __init__() [2 args, 0 calls, 0 called by]
      * calculate_frame_resolution() [3 args, 0 calls, 1 called by]
      * create_segments() [2 args, 0 calls, 1 called by]
      * extract_segment_frames() [6 args, 0 calls, 1 called by]
      * get_video_info() [2 args, 0 calls, 1 called by]
      * initialize_whisper() [1 args, 1 calls, 1 called by]
      * process_video_phase1() [3 args, 8 calls, 1 called by]
      * save_phase1_results() [3 args, 0 calls, 1 called by]
      * transcribe_segment() [5 args, 1 calls, 1 called by]

  Imports (19):
    - audio_extractor.check_ffmpeg_available
    - audio_extractor.cleanup_temp_files
    - audio_extractor.extract_audio_segment
    - base64
    - config_manager.set_video_path
    - cv2
    - datetime.datetime
    - db_manager.ChromaDBManager
    - json
    - numpy
    - pathlib.Path
    - pickle
    - torch
    - tqdm.tqdm
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Tuple
    - whisper


[21] phase2_vllm_analysis.py - Phase 2: VLLM Analysis (67.8 KB, 1357 lines)

  Module Functions (3):
    - main() [0 args, 2 calls, 0 called by]
    - test_model_control() [0 args, 7 calls, 1 called by]
    - tqdm() [3 args, 0 calls, 2 called by]

  Classes (1):
    - Phase2VLLMAnalyzer (base: None, methods: 31)
      * __init__() [3 args, 1 calls, 0 called by]
      * _convert_markdown_to_json() [2 args, 0 calls, 1 called by]
      * _extract_from_markdown_blocks() [2 args, 0 calls, 1 called by]
      * _is_structured_markdown() [2 args, 0 calls, 1 called by]
      * analyze_segment_vllm() [3 args, 0 calls, 3 called by]
      * auto_start_model_if_needed() [2 args, 2 calls, 1 called by]
      * check_model_health() [1 args, 1 calls, 1 called by]
      * check_preventive_restart() [2 args, 0 calls, 1 called by]
      * create_vllm_prompt() [3 args, 0 calls, 1 called by]
      * detect_quality_degradation() [3 args, 0 calls, 1 called by]
      * extract_json_from_response() [2 args, 3 calls, 2 called by]
      * get_base64_frames() [2 args, 1 calls, 1 called by]
      * get_flag_path() [2 args, 0 calls, 3 called by]
      * get_model_status() [1 args, 1 calls, 3 called by]
      * get_previous_segment_context() [3 args, 1 calls, 1 called by]
      * get_segments_to_process() [3 args, 1 calls, 1 called by]
      * load_config() [2 args, 0 calls, 1 called by]
      * load_existing_results() [2 args, 0 calls, 3 called by]
      * load_phase1_data() [2 args, 0 calls, 2 called by]
      * merge_results() [3 args, 2 calls, 1 called by]
      * process_phase2_analysis() [2 args, 23 calls, 1 called by]
      * read_status_file() [2 args, 1 calls, 1 called by]
      * request_model_restart() [3 args, 1 calls, 0 called by]
      * restart_model() [3 args, 1 calls, 4 called by]
      * save_phase2_results() [3 args, 1 calls, 1 called by]
      * start_model() [3 args, 1 calls, 2 called by]
      * stop_model() [2 args, 1 calls, 1 called by]
      * test_vllm_connection() [1 args, 0 calls, 6 called by]
      * wait_for_model_restart() [2 args, 2 calls, 3 called by]
      * wait_for_model_stop() [2 args, 1 calls, 1 called by]
      * write_flag_file() [3 args, 1 calls, 3 called by]

  Imports (24):
    - base64
    - cv2
    - datetime.datetime
    - db_manager.ChromaDBManager
    - json
    - json
    - json
    - os
    - pathlib.Path
    - pickle
    - platform
    - re
    - re
    - requests
    - shutil
    - subprocess
    - sys
    - time
    - tqdm.tqdm
    - traceback
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional


[22] plate_detector.py - Plate Detector Module - YOLO-based detection for vehicles and license plates (9.0 KB, 261 lines)

  Classes (1):
    - PlateDetector (base: None, methods: 8)
      * __init__() [2 args, 2 calls, 0 called by]
      * _get_default_config() [1 args, 0 calls, 1 called by]
      * _init_models() [1 args, 0 calls, 1 called by]
      * detect_plates() [2 args, 0 calls, 0 called by]
      * detect_vehicles() [2 args, 0 calls, 0 called by]
      * extract_plate_zones_from_vehicle() [3 args, 0 calls, 0 called by]
      * extract_region() [4 args, 0 calls, 0 called by]
      * select_primary_vehicle() [3 args, 0 calls, 0 called by]

  Imports (9):
    - cv2
    - logging
    - numpy
    - pathlib.Path
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional
    - ultralytics.YOLO


[23] plate_recognizer.py - Plate Recognizer Module - OCR and plate structure detection (31.9 KB, 704 lines)

  Module Functions (2):
    - fix_kg_text() [2 args, 0 calls, 9 called by]
    - is_above() [2 args, 0 calls, 6 called by]

  Classes (2):
    - PlateRecognizer (base: None, methods: 5)
      * __init__() [1 args, 1 calls, 0 called by]
      * _detect_plate_structure() [2 args, 15 calls, 1 called by]
      * _load_plate_patterns() [1 args, 0 calls, 1 called by]
      * _safe_extract_ocr_results() [2 args, 0 calls, 1 called by]
      * recognize() [2 args, 2 calls, 0 called by]
    - PlateStructure (base: None, methods: 0)

  Imports (9):
    - dataclasses.dataclass
    - logging
    - paddleocr.PaddleOCR
    - re
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional
    - typing.Tuple


[24] pose_detector.py - Human pose detection and gesture analysis module using MediaPipe Pose. (18.4 KB, 471 lines)

  Module Functions (10):
    - analyze_gesture() [2 args, 0 calls, 1 called by]
    - calculate_pose_bbox() [2 args, 0 calls, 1 called by]
    - detect_poses_batch() [5 args, 3 calls, 1 called by]
    - export_pose_results() [2 args, 2 calls, 1 called by]
    - extract_pose_metrics() [2 args, 0 calls, 1 called by]
    - group_poses_by_timestamp() [2 args, 0 calls, 1 called by]
    - initialize_pose_model() [0 args, 0 calls, 1 called by]
    - main() [0 args, 2 calls, 0 called by]
    - process_single_frame_pose() [4 args, 3 calls, 1 called by]
    - process_single_video_poses() [2 args, 5 calls, 1 called by]

  Imports (18):
    - config_manager.get_output_dir
    - config_manager.get_processing_params
    - config_manager.get_video_path
    - config_manager.set_video_path
    - cv2
    - frame_extractor.extract_frames_with_timestamps
    - math
    - mediapipe
    - numpy
    - pathlib.Path
    - result_exporter.create_output_filename
    - result_exporter.export_objects_csv
    - time
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional
    - typing.Tuple


[25] progress_monitor.py - Progress Monitor - утилита для мониторинга прогресса Phase 2 (2.6 KB, 69 lines)

  Module Functions (1):
    - monitor_progress() [0 args, 0 calls, 0 called by]

  Imports (4):
    - datetime.datetime
    - json
    - pathlib.Path
    - time


[26] result_exporter.py - Module: unknown (3.5 KB, 94 lines)

  Module Functions (6):
    - create_output_filename() [2 args, 1 calls, 12 called by]
    - export_face_timeline_csv() [2 args, 0 calls, 1 called by]
    - export_faces_csv() [2 args, 0 calls, 1 called by]
    - export_objects_csv() [2 args, 0 calls, 6 called by]
    - export_scenes_csv() [2 args, 0 calls, 1 called by]
    - export_transcription_csv() [2 args, 0 calls, 3 called by]

  Imports (6):
    - config_manager.get_output_dir
    - pandas
    - pathlib.Path
    - typing.Any
    - typing.Dict
    - typing.List


[27] run_vllm_analysis.py - VLLM Video Analysis Module - Отдельный модуль для анализа видео через Vision-Language модель (6.7 KB, 188 lines)

  Module Functions (4):
    - export_vllm_results() [2 args, 2 calls, 1 called by]
    - load_context_from_other_modules() [1 args, 0 calls, 1 called by]
    - main() [0 args, 1 calls, 0 called by]
    - process_single_video_vllm() [1 args, 5 calls, 1 called by]

  Imports (15):
    - config_manager.get_video_path
    - config_manager.load_config
    - config_manager.set_video_path
    - frame_extractor.extract_frames_with_timestamps
    - json
    - os
    - pathlib.Path
    - result_exporter.create_output_filename
    - result_exporter.export_objects_csv
    - traceback
    - typing.Any
    - typing.Dict
    - typing.List
    - vllm_client.VLLMClient
    - vllm_client.analyze_video_frames_vllm


[28] scene_analyzer.py - Module: unknown (14.6 KB, 352 lines)

  Module Functions (6):
    - analyze_scene() [3 args, 1 calls, 0 called by]
    - detect_scene_changes() [4 args, 3 calls, 1 called by]
    - get_fallback_scene_description() [1 args, 0 calls, 1 called by]
    - get_scene_description() [1 args, 2 calls, 2 called by]
    - initialize_clip_model() [0 args, 0 calls, 2 called by]
    - simplify_scene_name() [1 args, 0 calls, 1 called by]

  Imports (17):
    - PIL.Image
    - config_manager.get_processing_params
    - config_manager.get_video_info
    - config_manager.get_video_path
    - cv2
    - numpy
    - open_clip
    - open_clip
    - time
    - torch
    - torch
    - torch
    - torch
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Tuple


[29] test_search.py - Test ChromaDB search functionality (3.8 KB, 135 lines)

  Module Functions (3):
    - format_time() [1 args, 0 calls, 4 called by]
    - main() [0 args, 3 calls, 0 called by]
    - print_result() [2 args, 2 calls, 1 called by]

  Imports (2):
    - db_manager.ChromaDBManager
    - sys


[30] translator.py - Translation module using local LLM via text-generation-webui API. (10.7 KB, 321 lines)

  Module Functions (7):
    - call_llm_api() [4 args, 0 calls, 1 called by]
    - group_segments_into_chunks() [2 args, 0 calls, 1 called by]
    - parse_translated_line() [1 args, 0 calls, 1 called by]
    - parse_translated_response() [2 args, 1 calls, 1 called by]
    - save_translation_debug_info() [3 args, 0 calls, 0 called by]
    - translate_chunk() [4 args, 2 calls, 1 called by]
    - translate_transcription_segments() [1 args, 3 calls, 0 called by]

  Imports (9):
    - config_manager.get_processing_params
    - json
    - pathlib.Path
    - re
    - requests
    - time
    - typing.Any
    - typing.Dict
    - typing.List


[31] unified_anpr_system.py - Unified ANPR System - Main orchestrator module (31.8 KB, 765 lines)

  Module Functions (1):
    - main() [0 args, 2 calls, 0 called by]

  Classes (3):
    - RadarData (base: None, methods: 0)
    - UnifiedANPRSystem (base: None, methods: 12)
      * __init__() [2 args, 2 calls, 0 called by]
      * _enhance_plate_image() [2 args, 0 calls, 2 called by]
      * _extract_radar_data() [2 args, 0 calls, 1 called by]
      * _generate_summary() [2 args, 0 calls, 1 called by]
      * _get_default_config() [1 args, 0 calls, 1 called by]
      * _ocr_pass_fullscreen() [2 args, 0 calls, 1 called by]
      * _ocr_pass_plate_zones() [3 args, 1 calls, 1 called by]
      * _ocr_pass_vehicle_zones() [3 args, 0 calls, 1 called by]
      * _process_yolo_plates() [3 args, 1 calls, 1 called by]
      * _setup_logging() [1 args, 0 calls, 1 called by]
      * analyze_frame() [2 args, 7 calls, 2 called by]
      * process_video() [3 args, 2 calls, 1 called by]
    - Vehicle (base: None, methods: 1)
      * to_dict() [1 args, 0 calls, 2 called by]

  Imports (18):
    - cv2
    - dataclasses.asdict
    - dataclasses.dataclass
    - datetime.datetime
    - json
    - logging
    - numpy
    - os
    - pathlib.Path
    - plate_detector.PlateDetector
    - plate_recognizer.PlateRecognizer
    - plate_recognizer.PlateStructure
    - re
    - time
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional


[32] vehicle_compcars_analyzer.py - CompCars-based vehicle analysis module for detailed make/model classification. (19.5 KB, 481 lines)

  Module Functions (11):
    - analyze_vehicles_batch() [6 args, 4 calls, 1 called by]
    - classify_vehicle_region() [4 args, 0 calls, 1 called by]
    - create_compcars_classifier() [1 args, 0 calls, 1 called by]
    - create_compcars_transform() [0 args, 0 calls, 1 called by]
    - export_vehicle_analysis_results() [2 args, 2 calls, 1 called by]
    - get_compcars_class_names() [0 args, 0 calls, 1 called by]
    - group_vehicle_analysis_by_timestamp() [2 args, 0 calls, 1 called by]
    - initialize_compcars_models() [0 args, 2 calls, 1 called by]
    - main() [0 args, 2 calls, 0 called by]
    - process_frame_vehicles() [5 args, 1 calls, 1 called by]
    - process_single_video_compcars() [2 args, 5 calls, 1 called by]

  Imports (21):
    - config_manager.get_output_dir
    - config_manager.get_processing_params
    - config_manager.get_video_path
    - config_manager.set_video_path
    - cv2
    - frame_extractor.extract_frames_with_timestamps
    - json
    - numpy
    - pathlib.Path
    - result_exporter.create_output_filename
    - result_exporter.export_objects_csv
    - time
    - torch
    - torch.nn
    - torchvision.models
    - torchvision.transforms
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Tuple
    - ultralytics.YOLO


[33] vehicle_yolo_detector.py - YOLO-based vehicle detection module for video processing pipeline. (13.6 KB, 360 lines)

  Module Functions (8):
    - detect_vehicles_batch() [4 args, 3 calls, 1 called by]
    - export_vehicle_results() [2 args, 2 calls, 1 called by]
    - get_vehicle_center() [1 args, 0 calls, 1 called by]
    - group_vehicles_by_timestamp() [2 args, 0 calls, 1 called by]
    - initialize_yolo_vehicle_model() [0 args, 0 calls, 1 called by]
    - main() [0 args, 2 calls, 0 called by]
    - process_single_video_yolo_vehicles() [2 args, 5 calls, 1 called by]
    - process_yolo_vehicle_results() [2 args, 1 calls, 1 called by]

  Imports (17):
    - config_manager.get_output_dir
    - config_manager.get_processing_params
    - config_manager.get_video_path
    - config_manager.set_video_path
    - cv2
    - frame_extractor.extract_frames_with_timestamps
    - numpy
    - pathlib.Path
    - result_exporter.create_output_filename
    - result_exporter.export_objects_csv
    - time
    - torch
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Tuple
    - ultralytics.YOLO


[34] video_transcriber.py - Video Transcription Module - Отдельный модуль для транскрипции видео через Whisper (10.1 KB, 292 lines)

  Module Functions (8):
    - clean_repetitive_segments() [1 args, 0 calls, 0 called by]
    - export_transcription_results() [2 args, 2 calls, 1 called by]
    - format_timestamp() [1 args, 0 calls, 2 called by]
    - initialize_whisper_model() [0 args, 0 calls, 1 called by]
    - main() [0 args, 1 calls, 0 called by]
    - process_single_video_transcription() [1 args, 4 calls, 1 called by]
    - process_transcription_segments() [2 args, 2 calls, 1 called by]
    - transcribe_video_file() [2 args, 1 calls, 1 called by]

  Imports (13):
    - config_manager.get_video_path
    - config_manager.load_config
    - config_manager.set_video_path
    - pathlib.Path
    - result_exporter.create_output_filename
    - result_exporter.export_transcription_csv
    - time
    - torch
    - traceback
    - typing.Any
    - typing.Dict
    - typing.List
    - whisper


[35] vllm_client.py - VLLM Client for video frame analysis using Qwen 2.5 VL model (10.9 KB, 276 lines)

  Module Functions (2):
    - analyze_video_frames_vllm() [3 args, 3 calls, 1 called by]
    - prepare_context_for_frame() [2 args, 0 calls, 1 called by]

  Classes (1):
    - VLLMClient (base: None, methods: 6)
      * __init__() [2 args, 1 calls, 0 called by]
      * analyze_frame() [3 args, 1 calls, 1 called by]
      * frame_to_base64() [2 args, 1 calls, 1 called by]
      * load_config() [2 args, 0 calls, 1 called by]
      * resize_frame_if_needed() [2 args, 0 calls, 1 called by]
      * test_connection() [1 args, 0 calls, 1 called by]

  Imports (11):
    - base64
    - cv2
    - json
    - numpy
    - pathlib.Path
    - requests
    - time
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Optional


[36] vllm_scene_director.py - VLLM Scene Director - "Режиссер" для умной нарезки видео на сцены (22.3 KB, 516 lines)

  Module Functions (2):
    - export_segmentation_results() [2 args, 0 calls, 1 called by]
    - main() [0 args, 2 calls, 0 called by]

  Classes (1):
    - VLLMSceneDirector (base: None, methods: 7)
      * __init__() [1 args, 0 calls, 0 called by]
      * analyze_multiple_frames_vllm() [3 args, 0 calls, 1 called by]
      * analyze_segment_with_vllm() [3 args, 1 calls, 1 called by]
      * create_video_segments() [3 args, 0 calls, 1 called by]
      * extract_mini_frames() [3 args, 1 calls, 1 called by]
      * load_transcription_segments() [2 args, 0 calls, 1 called by]
      * process_video_segmentation() [2 args, 5 calls, 1 called by]

  Imports (16):
    - base64
    - config_manager.load_config
    - config_manager.set_video_path
    - cv2
    - frame_extractor.extract_frames_with_timestamps
    - json
    - numpy
    - pandas
    - pathlib.Path
    - time
    - traceback
    - typing.Any
    - typing.Dict
    - typing.List
    - typing.Tuple
    - vllm_client.VLLMClient

